<div class="page-container">
  <header class="page-header">
    <div class="header-content">
      <h1>Reserva de Laboratórios</h1>
      <p>Ambiente de consulta e agendamento</p>
    </div>

    <div class="header-actions">
      <a routerLink="/users" class="btn-outline">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        Gestão de Usuários
      </a>

      <a routerLink="/admin" class="btn-primary">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M2 20h20"></path>
          <path d="M5 20v-7a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v7"></path>
          <path d="M10 11V7a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v4"></path>
        </svg>
        Gestão de Laboratórios
      </a>
    </div>
  </header>

  <div class="search-section">
    <div class="search-wrapper">
      <span class="search-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#999"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </span>
      <input
        type="text"
        placeholder="Buscar laboratório por nome, prédio ou equipamento..."
        (input)="onSearch($event)"
      />
    </div>
  </div>

  <div class="lab-grid" *ngIf="laboratories.length > 0">
    <div
      class="lab-item"
      *ngFor="let item of laboratories"
      (click)="openReservation(item)"
    >
      <app-lab-card [lab]="item"></app-lab-card>
    </div>
  </div>

  <div class="empty-state" *ngIf="laboratories.length === 0">
    <p>Nenhum laboratório encontrado.</p>
  </div>

  <div class="pagination" *ngIf="laboratories.length > 0">
    <button (click)="prevPage()" [disabled]="!hasPrevious">← Anterior</button>

    <span class="page-info">
      Página <strong>{{ currentPage }}</strong> de
      <strong>{{ totalPages }}</strong>
    </span>

    <button (click)="nextPage()" [disabled]="!hasNext">Próximo →</button>
  </div>

  <app-modal-wrapper
    *ngIf="showReservationModal"
    title="Nova Reserva"
    (close)="closeReservation()"
  >
    <app-reservation-form
      [laboratoryId]="selectedLab?.id"
      [laboratoryName]="selectedLab?.name"
      (saved)="onReservationSaved()"
      (cancelled)="closeReservation()"
    >
    </app-reservation-form>
  </app-modal-wrapper>
</div>
