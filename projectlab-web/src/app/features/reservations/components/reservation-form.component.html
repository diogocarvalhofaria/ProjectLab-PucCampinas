<div class="form-content">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Laboratório</label>
      <input
        type="text"
        [value]="laboratoryName"
        class="input-field readonly"
        readonly
        disabled
      />
    </div>

    <div class="divider">Detalhes da Reserva</div>

    <div class="form-group">
      <label>Data</label>
      <input
        type="date"
        formControlName="reservationDate"
        class="input-field"
      />
    </div>

    <div class="occupied-warning" *ngIf="occupiedSlots.length > 0">
      <strong>Horários já ocupados:</strong>
      <div class="slots-list">
        <span class="slot-badge" *ngFor="let slot of occupiedSlots">
          {{ slot.startTime }} - {{ slot.endTime }}
        </span>
      </div>
    </div>

    <div class="time-grid">
      <div class="form-group">
        <label>Início</label>
        <select formControlName="startTime" class="input-field">
          <option value="" disabled selected>Selecione...</option>
          <option *ngFor="let time of timeOptions" [value]="time">
            {{ time }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Fim</label>
        <select formControlName="endTime" class="input-field">
          <option value="" disabled selected>Selecione...</option>
          <option *ngFor="let time of timeOptions" [value]="time">
            {{ time }}
          </option>
        </select>
      </div>
    </div>

    <div class="actions">
      <button type="button" class="btn-cancel" (click)="onCancel()">
        Cancelar
      </button>

      <button
        type="submit"
        class="btn-submit"
        [disabled]="form.invalid || loading"
      >
        {{ loading ? "Salvando..." : "Confirmar Reserva" }}
      </button>
    </div>
  </form>
</div>

<app-confirmation-modal
  *ngIf="showConfirmationModal"
  title="Confirmar Agendamento"
  [message]="confirmationMessage"
  confirmButtonText="Sim, Reservar"
  (confirm)="confirmSave()"
  (cancel)="closeConfirmationModal()"
>
</app-confirmation-modal>
